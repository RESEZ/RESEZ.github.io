{"title":"通过css 3d transform让页面变3d","slug":"通过css 3d transform让页面变3d","date":"2017-03-26T01:48:29.000Z","updated":"2017-09-23T09:13:26.659Z","comments":true,"excerpt":"<p>通过<code>css 3d transform</code>让页面变3d。</p>","content":"<p>通过<code>css 3d transform</code>让页面变3d。</p>\n<a id=\"more\"></a>\n<p>我只是实在想不到写什么，水文罢了。</p>\n<p>顺便试试hexo的<code>html</code>,连js都可以写。</p>\n<h2 id=\"预览\"><a href=\"#预览\" class=\"headerlink\" title=\"预览\"></a>预览</h2><button onclick=\"postCSS3d()\">3D</button>\n\n<script>\n  (function(){\n    var flag = false;\n    $(\"body\").css({\n      \"transition\": \"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms\"\n    })\n    function postCSS3d(){\n      if(flag == false){\n        flag = true;\n        $(\"body\").css({\n            \"transform\": \"perspective(6000px) rotateY(30deg) translateZ(-1000px) translateX(550px)\",\n            \"transform-style\": \"preserve-3d\",\n            \"perspective-origin\": \"50% 1000px\",\n            \"height\": \"100%\",\n            \"overflow\": \"scroll\",\n            \"pointer-events\": \"auto\"\n        })\n        $(\"html\").css({\n            \"height\": \"100%\"\n        })\n      }else{\n        flag = false;\n        $(\"body\").css({\n            \"transform\": \"inherit\",\n            \"transform-style\": \"inherit\",\n            \"perspective-origin\": \"inherit\",\n            \"height\": \"inherit\",\n            \"overflow\": \"inherit\",\n            \"pointer-events\": \"inherit\"\n        })\n        $(\"html\").css({\n            \"height\": \"inherit\"\n        })\n      }\n    }\n    window.postCSS3d = postCSS3d;\n  })()\n</script>\n\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">\"3Dtransition\"</span>&gt;</span>3D<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"javascript\">  (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> flag = <span class=\"literal\">false</span>;</span></div><div class=\"line\"><span class=\"javascript\">    $(<span class=\"string\">\"body\"</span>).css(&#123;</span></div><div class=\"line\"><span class=\"javascript\">      <span class=\"string\">\"transition\"</span>: <span class=\"string\">\"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms\"</span></span></div><div class=\"line\"><span class=\"undefined\">    &#125;)</span></div><div class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">postCSS3d</span>(<span class=\"params\"></span>)</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">if</span>(flag == <span class=\"literal\">false</span>)&#123;</span></div><div class=\"line\"><span class=\"javascript\">        flag = <span class=\"literal\">true</span>;</span></div><div class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">\"body\"</span>).css(&#123;</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"transform\"</span>: <span class=\"string\">\"perspective(6000px) rotateY(30deg) translateZ(-1000px) translateX(550px)\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"transform-style\"</span>: <span class=\"string\">\"preserve-3d\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"perspective-origin\"</span>: <span class=\"string\">\"50% 1000px\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"height\"</span>: <span class=\"string\">\"100%\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"overflow\"</span>: <span class=\"string\">\"scroll\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"pointer-events\"</span>: <span class=\"string\">\"auto\"</span></span></div><div class=\"line\"><span class=\"undefined\">        &#125;)</span></div><div class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">\"html\"</span>).css(&#123;</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"height\"</span>: <span class=\"string\">\"100%\"</span></span></div><div class=\"line\"><span class=\"undefined\">        &#125;)</span></div><div class=\"line\"><span class=\"javascript\">      &#125;<span class=\"keyword\">else</span>&#123;</span></div><div class=\"line\"><span class=\"javascript\">        flag = <span class=\"literal\">false</span>;</span></div><div class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">\"body\"</span>).css(&#123;</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"transform\"</span>: <span class=\"string\">\"inherit\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"transform-style\"</span>: <span class=\"string\">\"inherit\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"perspective-origin\"</span>: <span class=\"string\">\"inherit\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"height\"</span>: <span class=\"string\">\"inherit\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"overflow\"</span>: <span class=\"string\">\"inherit\"</span>,</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"pointer-events\"</span>: <span class=\"string\">\"inherit\"</span></span></div><div class=\"line\"><span class=\"undefined\">        &#125;)</span></div><div class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">\"html\"</span>).css(&#123;</span></div><div class=\"line\"><span class=\"javascript\">            <span class=\"string\">\"height\"</span>: <span class=\"string\">\"inherit\"</span></span></div><div class=\"line\"><span class=\"undefined\">        &#125;)</span></div><div class=\"line\"><span class=\"undefined\">      &#125;</span></div><div class=\"line\"><span class=\"undefined\">    &#125;</span></div><div class=\"line\"><span class=\"javascript\">    $(<span class=\"string\">\"3Dtransition\"</span>).onClick(postCSS3d);</span></div><div class=\"line\"><span class=\"undefined\">  &#125;)()</span></div><div class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"PS\"><a href=\"#PS\" class=\"headerlink\" title=\"PS\"></a>PS</h2><p>我发现有些人js是定义是写在全局的<a href=\"https://halyul.com\" target=\"_blank\" rel=\"external\">@halyul</a>，这不是好习惯，变量多了容易重复定义。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\"> ...</div><div class=\"line\">&#125;)()</div></pre></td></tr></table></figure>\n<p>这种写法可以避免这个问题。</p>\n<p>等同于：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">a()</div></pre></td></tr></table></figure>\n<h2 id=\"再见\"><a href=\"#再见\" class=\"headerlink\" title=\"再见\"></a>再见</h2><p><span style=\"font-size:12px;color:#888\">封面画师: <a href=\"http://www.pixiv.net/member.php?id=11246082\" target=\"_blank\" rel=\"external\">Miv4t</a></span></p>\n","thumbnail":"/img/通过css 3d transform让页面变3d/cover.jpg","primarycolor":"blueGrey","accentcolor":"blueGrey","categories":[{"name":"技术","path":"api/categories/技术.json"}],"tags":[{"name":"技术","path":"api/tags/技术.json"},{"name":"css","path":"api/tags/css.json"}]}